# 表单设计器 (Form Designer) 开发中，有些暂时是设想，还未实现，后面会逐步实现~~

一个基于 Vue 3 + TypeScript + Element Plus 的可拖拽低代码表单设计器，**完全匹配您现有的数据结构**。

## 🎯 核心功能

- **拖拽设计**: 支持从左侧组件库拖拽组件到设计区域
- **实时预览**: 可以实时预览设计的表单效果
- **属性配置**: 右侧属性面板可以配置组件的各种属性
- **组件管理**: 支持添加、删除、复制、移动组件
- **表单导出**: 支持导出设计好的表单配置
- **跳题功能**: 支持自动跳题逻辑
- **隐藏题目**: 支持根据选择隐藏特定题目
- **子问题**: 支持复杂的嵌套问题结构

## 🧩 支持的组件类型

### 1. 输入框 (Input)
- 支持文本、数字、邮箱、电话、密码、文本域、数字输入等类型
- 可配置占位符、最大长度、行数等属性
- 完全匹配现有的 `InputRender` 组件

### 2. 单选题 (SingleSelect)
- 支持自定义选项标签和值
- 可动态添加/删除选项
- **支持自动跳题** (`autoJump: true`)
- **支持隐藏题目** (`hideQuestions: [8, 9, 10, 11]`)
- **支持子问题** (`subQuestions`)
- 完全匹配现有的 `SingleChoiceRender` 组件

### 3. 多选题 (MultSelect)
- 支持多选模式
- 可配置最小/最大选择数
- **支持子问题** (`subQuestions`)
- 完全匹配现有的 `MultChoiceRender` 组件

### 4. 日期选择 (Date)
- 支持多种日期类型（日期、日期时间、日期范围、月份、年份）
- 可配置日期范围限制
- 完全匹配现有的 `DateRender` 组件

### 5. 特殊选择 (SpecialSelect)
- 支持复杂的嵌套问题结构
- 可配置子问题类型（输入框、单选题）
- 完全匹配现有的 `SpecialRender` 组件

## 🚀 新增功能特性

### 跳题功能
- 在单选题选项中设置 `autoJump: true`
- 用户选择该选项后会自动跳转到下一题
- 支持在属性面板中配置

### 隐藏题目功能
- 在单选题选项中设置 `hideQuestions: [8, 9, 10, 11]`
- 用户选择该选项后，指定的题目会被隐藏
- 支持在属性面板中输入题号（用逗号分隔）

### 子问题功能
- 支持在选项下添加子问题
- 子问题类型支持输入框和单选题
- 完全匹配现有的数据结构

## 🎨 界面布局

- **左侧**: 组件库，包含所有可用的表单组件
- **中间**: 设计区域，用于拖拽和排列组件
- **右侧**: 属性配置面板，用于配置选中组件的属性

## 📊 数据结构完全匹配

表单设计器生成的数据结构与您现有的代码完全兼容：

```typescript
// 单选题示例
{
  id: 'uuid',
  title: '请问您的分娩方式是：',
  type: 'singleSelect',
  content: [
    {
      label: '剖宫产',
      id: 'uuid',
      hideQuestions: [8, 9, 10, 11],
      autoJump: true
    },
    {
      label: '顺产',
      id: 'uuid',
      hideQuestions: [8, 9, 10, 11],
      autoJump: true
    }
  ]
}

// 带子问题的选项
{
  label: '异常',
  id: 'uuid',
  subQuestions: {
    type: 'input',
    id: 'uuid',
    content: [
      {
        id: 'uuid',
        placeHolder: '请输入具体异常',
        type: 'text'
      }
    ]
  }
}
```

## 🛠️ 使用方法

### 1. 基本使用

```vue
<template>
  <FormDesigner />
</template>

<script setup>
import FormDesigner from '@/components/FormDesigner/index.vue'
</script>
```

### 2. 设计表单流程

1. **拖拽组件**: 从左侧组件库拖拽需要的组件到中间设计区域
2. **选择组件**: 点击设计区域中的组件进行选择
3. **配置属性**: 在右侧属性面板中配置组件的各种属性
4. **配置跳题**: 在单选题选项中设置自动跳题和隐藏题目
5. **配置子问题**: 在选项中添加子问题
6. **预览效果**: 点击顶部工具栏的"预览"按钮查看表单效果
7. **保存导出**: 使用"保存"或"导出"功能保存设计结果

### 3. 跳题和隐藏题目配置

1. 选择单选题组件
2. 在右侧属性面板中选择要配置的选项
3. 开启"自动跳题"开关
4. 在"隐藏题目"输入框中输入要隐藏的题号（如：8,9,10,11）
5. 保存配置

### 4. 子问题配置

1. 选择单选题或多选题组件
2. 在右侧属性面板中选择要配置的选项
3. 开启"子问题"开关
4. 选择子问题类型（输入框或单选题）
5. 配置子问题的具体内容
6. 保存配置

## 🔧 技术特性

- **Vue 3 Composition API**: 使用最新的 Vue 3 语法
- **TypeScript**: 完整的类型支持
- **Element Plus**: 现代化的 UI 组件库
- **拖拽支持**: 原生 HTML5 拖拽 API
- **响应式设计**: 支持各种屏幕尺寸
- **组件化**: 模块化的组件设计，易于扩展

## 📁 文件结构

```
src/components/FormDesigner/
├── index.vue                 # 主设计器组件
├── components/
│   ├── FormPreview.vue      # 预览组件（支持跳题和隐藏题目）
│   └── PropertyPanel.vue    # 属性面板（支持跳题、隐藏题目、子问题配置）
├── examples/
│   └── basic-usage.vue      # 使用示例
└── README.md                # 详细文档
```

## 🎯 与现有代码的兼容性

- **数据结构**: 完全匹配现有的 `content` 数组结构
- **组件名称**: 使用现有的组件名称（`InputRender`、`SingleChoiceRender` 等）
- **属性名称**: 完全匹配现有的属性名（`placeHolder`、`hideQuestions`、`autoJump` 等）
- **验证逻辑**: 支持现有的验证和隐藏逻辑

## 🚀 快速开始

1. 访问 `/Editor` 路由
2. 拖拽组件到设计区域
3. 配置组件属性
4. 设置跳题和隐藏题目逻辑
5. 预览和测试表单
6. 导出表单配置

## 📝 注意事项

1. **组件依赖**: 确保项目中已安装 Element Plus 和相关图标库
2. **工具函数**: 需要 `@/utils/tools` 中的 `getUuid` 函数
3. **现有组件**: 需要确保现有的渲染组件（`InputRender`、`SingleChoiceRender` 等）可用
4. **数据格式**: 导出的表单配置可以直接用于现有的表单渲染逻辑

## 🔄 更新日志

### v2.0.0
- 完全重构，匹配现有数据结构
- 新增跳题功能支持
- 新增隐藏题目功能支持
- 新增子问题配置支持
- 优化属性配置面板
- 增强表单预览功能

### v1.0.0
- 初始版本发布
- 支持基础的表单组件拖拽设计
- 支持组件属性配置
- 支持表单预览和导出

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request 来改进这个表单设计器。

## �� 许可证

MIT License
